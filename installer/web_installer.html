<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Root-MAS System Installer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .step { display: none; }
        .step.active { display: block; }
        .progress-bar { transition: width 0.3s ease; }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold mb-2">ü§ñ Root-MAS System Installer</h1>
            <p class="text-gray-400">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–Ω–æ–≥–æ–∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã</p>
        </div>

        <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä -->
        <div class="mb-8">
            <div class="flex justify-between text-sm text-gray-400 mb-2">
                <span>–®–∞–≥ <span id="current-step">1</span> –∏–∑ 5</span>
                <span id="progress-percent">0%</span>
            </div>
            <div class="w-full bg-gray-700 rounded-full h-2">
                <div id="progress-bar" class="bg-blue-600 h-2 rounded-full progress-bar" style="width: 20%"></div>
            </div>
        </div>

        <!-- –®–∞–≥ 1: –¢–∏–ø —É—Å—Ç–∞–Ω–æ–≤–∫–∏ -->
        <div id="step-1" class="step active">
            <div class="bg-gray-800 rounded-lg p-6">
                <h2 class="text-2xl font-bold mb-4">üè† –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —É—Å—Ç–∞–Ω–æ–≤–∫–∏</h2>
                
                <div class="space-y-4">
                    <label class="flex items-center p-4 border border-gray-600 rounded-lg cursor-pointer hover:bg-gray-700">
                        <input type="radio" name="install-type" value="local" class="mr-3" checked>
                        <div>
                            <div class="font-semibold">üñ•Ô∏è –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞</div>
                            <div class="text-sm text-gray-400">–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —Ç–µ–∫—É—â–∏–π –∫–æ–º–ø—å—é—Ç–µ—Ä</div>
                        </div>
                    </label>
                    
                    <label class="flex items-center p-4 border border-gray-600 rounded-lg cursor-pointer hover:bg-gray-700">
                        <input type="radio" name="install-type" value="docker" class="mr-3">
                        <div>
                            <div class="font-semibold">üê≥ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä</div>
                            <div class="text-sm text-gray-400">–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ Docker</div>
                        </div>
                    </label>
                    
                    <label class="flex items-center p-4 border border-gray-600 rounded-lg cursor-pointer hover:bg-gray-700">
                        <input type="radio" name="install-type" value="cloud" class="mr-3">
                        <div>
                            <div class="font-semibold">‚òÅÔ∏è –û–±–ª–∞—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞</div>
                            <div class="text-sm text-gray-400">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ –æ–±–ª–∞–∫–µ</div>
                        </div>
                    </label>
                </div>

                <div class="mt-6">
                    <label class="block text-sm font-medium mb-2">–ü—É—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏:</label>
                    <input type="text" id="install-path" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg" 
                           value="/home/user/MAS-System" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—É—Ç—å –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏">
                </div>
            </div>
        </div>

        <!-- –®–∞–≥ 2: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã -->
        <div id="step-2" class="step">
            <div class="bg-gray-800 rounded-lg p-6">
                <h2 class="text-2xl font-bold mb-4">üß© –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <label class="flex items-center p-4 border border-gray-600 rounded-lg">
                        <input type="checkbox" name="components" value="core" class="mr-3" checked disabled>
                        <div>
                            <div class="font-semibold">ü§ñ –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã</div>
                            <div class="text-sm text-gray-400">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ</div>
                        </div>
                    </label>
                    
                    <label class="flex items-center p-4 border border-gray-600 rounded-lg cursor-pointer hover:bg-gray-700">
                        <input type="checkbox" name="components" value="telegram" class="mr-3">
                        <div>
                            <div class="font-semibold">üì± Telegram Bot</div>
                            <div class="text-sm text-gray-400">–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram</div>
                        </div>
                    </label>
                    
                    <label class="flex items-center p-4 border border-gray-600 rounded-lg cursor-pointer hover:bg-gray-700">
                        <input type="checkbox" name="components" value="gpt-pilot" class="mr-3">
                        <div>
                            <div class="font-semibold">üöÄ GPT-Pilot</div>
                            <div class="text-sm text-gray-400">–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</div>
                        </div>
                    </label>
                    
                    <label class="flex items-center p-4 border border-gray-600 rounded-lg cursor-pointer hover:bg-gray-700">
                        <input type="checkbox" name="components" value="studio" class="mr-3">
                        <div>
                            <div class="font-semibold">üé¨ AutoGen Studio</div>
                            <div class="text-sm text-gray-400">–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤</div>
                        </div>
                    </label>
                    
                    <label class="flex items-center p-4 border border-gray-600 rounded-lg cursor-pointer hover:bg-gray-700">
                        <input type="checkbox" name="components" value="monitoring" class="mr-3">
                        <div>
                            <div class="font-semibold">üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</div>
                            <div class="text-sm text-gray-400">Prometheus + Grafana</div>
                        </div>
                    </label>
                    
                    <label class="flex items-center p-4 border border-gray-600 rounded-lg cursor-pointer hover:bg-gray-700">
                        <input type="checkbox" name="components" value="memory" class="mr-3">
                        <div>
                            <div class="font-semibold">üíæ –•—Ä–∞–Ω–∏–ª–∏—â–∞</div>
                            <div class="text-sm text-gray-400">Redis + Postgres + Chroma</div>
                        </div>
                    </label>
                </div>
            </div>
        </div>

        <!-- –®–∞–≥ 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è -->
        <div id="step-3" class="step">
            <div class="bg-gray-800 rounded-lg p-6">
                <h2 class="text-2xl font-bold mb-4">‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API –∫–ª—é—á–µ–π</h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">
                            OpenRouter API Key <span class="text-red-500">*</span>
                        </label>
                        <input type="password" id="openrouter-key" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg" 
                               placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á OpenRouter (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
                    </div>
                    
                    <div>
                                        <label class="block text-sm font-medium mb-2">OpenRouter API Key</label>
                <input type="password" id="openrouter-key" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg"
                placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á OpenRouter (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">Telegram Bot Token</label>
                        <input type="password" id="telegram-token" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg" 
                               placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">GPT-Pilot API Key</label>
                        <input type="password" id="gpt-pilot-key" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg" 
                               placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á GPT-Pilot (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)">
                    </div>
                </div>
                
                <button onclick="testApiKeys()" class="mt-4 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg">
                    üß™ –¢–µ—Å—Ç API –∫–ª—é—á–µ–π
                </button>
            </div>
        </div>

        <!-- –®–∞–≥ 4: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
        <div id="step-4" class="step">
            <div class="bg-gray-800 rounded-lg p-6">
                <h2 class="text-2xl font-bold mb-4">üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                
                <div class="space-y-4">
                    <label class="flex items-center">
                        <input type="checkbox" id="auto-start" class="mr-3" checked>
                        <div>
                            <div class="font-semibold">üöÄ –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏</div>
                            <div class="text-sm text-gray-400">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏</div>
                        </div>
                    </label>
                    
                    <label class="flex items-center">
                        <input type="checkbox" id="desktop-shortcut" class="mr-3" checked>
                        <div>
                            <div class="font-semibold">üñ•Ô∏è –°–æ–∑–¥–∞—Ç—å —è—Ä–ª—ã–∫ –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ</div>
                            <div class="text-sm text-gray-400">–î–æ–±–∞–≤–∏—Ç—å –∏–∫–æ–Ω–∫—É –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞</div>
                        </div>
                    </label>
                    
                    <label class="flex items-center">
                        <input type="checkbox" id="add-to-path" class="mr-3" checked>
                        <div>
                            <div class="font-semibold">üîß –î–æ–±–∞–≤–∏—Ç—å –≤ PATH</div>
                            <div class="text-sm text-gray-400">–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏</div>
                        </div>
                    </label>
                    
                    <label class="flex items-center">
                        <input type="checkbox" id="enable-analytics" class="mr-3">
                        <div>
                            <div class="font-semibold">üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</div>
                            <div class="text-sm text-gray-400">–ü–æ–º–æ—á—å —É–ª—É—á—à–∏—Ç—å —Å–∏—Å—Ç–µ–º—É (–∞–Ω–æ–Ω–∏–º–Ω–æ)</div>
                        </div>
                    </label>
                </div>

                <div class="mt-6 p-4 bg-gray-700 rounded-lg">
                    <h3 class="font-semibold mb-2">üìã –°–≤–æ–¥–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:</h3>
                    <div id="install-summary" class="text-sm text-gray-300"></div>
                </div>
            </div>
        </div>

        <!-- –®–∞–≥ 5: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ -->
        <div id="step-5" class="step">
            <div class="bg-gray-800 rounded-lg p-6">
                <h2 class="text-2xl font-bold mb-4">üìà –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã</h2>
                
                <div class="mb-4">
                    <div class="text-sm text-gray-400 mb-2">–¢–µ–∫—É—â–∏–π —ç—Ç–∞–ø:</div>
                    <div id="current-task" class="font-semibold">–ì–æ—Ç–æ–≤ –∫ —É—Å—Ç–∞–Ω–æ–≤–∫–µ</div>
                </div>
                
                <div class="mb-4">
                    <div class="w-full bg-gray-700 rounded-full h-3">
                        <div id="install-progress" class="bg-green-600 h-3 rounded-full progress-bar" style="width: 0%"></div>
                    </div>
                </div>
                
                <div class="bg-gray-900 rounded-lg p-4 h-64 overflow-y-auto">
                    <div id="install-log" class="font-mono text-sm text-green-400"></div>
                </div>
                
                <div class="mt-4 text-center">
                    <button id="start-install" onclick="startInstallation()" 
                            class="bg-green-600 hover:bg-green-700 px-8 py-3 rounded-lg font-semibold">
                        üöÄ –ù–∞—á–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É
                    </button>
                </div>
            </div>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div class="flex justify-between mt-8">
            <button id="prev-btn" onclick="previousStep()" 
                    class="bg-gray-600 hover:bg-gray-700 px-6 py-2 rounded-lg" style="display: none;">
                ‚Üê –ù–∞–∑–∞–¥
            </button>
            <button id="next-btn" onclick="nextStep()" 
                    class="bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg ml-auto">
                –î–∞–ª–µ–µ ‚Üí
            </button>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 5;

        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progress-bar').style.width = progress + '%';
            document.getElementById('current-step').textContent = currentStep;
            document.getElementById('progress-percent').textContent = Math.round(progress) + '%';
        }

        function showStep(step) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —à–∞–≥–∏
            document.querySelectorAll('.step').forEach(el => el.classList.remove('active'));
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —à–∞–≥
            document.getElementById(`step-${step}`).classList.add('active');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            document.getElementById('prev-btn').style.display = step > 1 ? 'block' : 'none';
            document.getElementById('next-btn').style.display = step < totalSteps ? 'block' : 'none';
            
            updateProgress();
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                if (validateCurrentStep()) {
                    currentStep++;
                    showStep(currentStep);
                    if (currentStep === 4) updateSummary();
                }
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
            }
        }

        function validateCurrentStep() {
            if (currentStep === 3) {
                const openrouterKey = document.getElementById('openrouter-key').value;
                if (!openrouterKey) {
                    alert('OpenRouter API Key –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã!');
                    return false;
                }
            }
            return true;
        }

        function updateSummary() {
            const installType = document.querySelector('input[name="install-type"]:checked').value;
            const components = Array.from(document.querySelectorAll('input[name="components"]:checked'))
                .map(el => el.value);
            
            const summary = `
                <strong>–¢–∏–ø —É—Å—Ç–∞–Ω–æ–≤–∫–∏:</strong> ${installType}<br>
                <strong>–ü—É—Ç—å:</strong> ${document.getElementById('install-path').value}<br>
                <strong>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:</strong> ${components.join(', ')}<br>
                <strong>API –∫–ª—é—á–∏:</strong> ${document.getElementById('openrouter-key').value ? '–ù–∞—Å—Ç—Ä–æ–µ–Ω—ã' : '–ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã'}
            `;
            
            document.getElementById('install-summary').innerHTML = summary;
        }

        function testApiKeys() {
            const openrouterKey = document.getElementById('openrouter-key').value;
            if (!openrouterKey) {
                alert('–í–≤–µ–¥–∏—Ç–µ OpenRouter API Key –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è');
                return;
            }
            
            // –ò–º–∏—Ç–∞—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            setTimeout(() => {
                alert('‚úÖ API –∫–ª—é—á–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ!');
            }, 1000);
        }

        function addToLog(message) {
            const log = document.getElementById('install-log');
            log.innerHTML += message + '<br>';
            log.scrollTop = log.scrollHeight;
        }

        function startInstallation() {
            document.getElementById('start-install').style.display = 'none';
            
            const steps = [
                '–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π...',
                '–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤...',
                '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...',
                '–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏...',
                '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤...',
                '–§–∏–Ω–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞...',
                '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! üéâ'
            ];
            
            let progress = 0;
            
            steps.forEach((step, index) => {
                setTimeout(() => {
                    document.getElementById('current-task').textContent = step;
                    addToLog(`[${new Date().toLocaleTimeString()}] ${step}`);
                    
                    progress = ((index + 1) / steps.length) * 100;
                    document.getElementById('install-progress').style.width = progress + '%';
                    
                    if (index === steps.length - 1) {
                        addToLog('');
                        addToLog('üöÄ Root-MAS —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!');
                        addToLog('üìç –°–∏—Å—Ç–µ–º–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤: ' + document.getElementById('install-path').value);
                        addToLog('üí° –î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: ./production_launcher.py');
                        
                        if (document.getElementById('auto-start').checked) {
                            setTimeout(() => {
                                addToLog('üéØ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã...');
                                window.open('/mas-dashboard', '_blank');
                            }, 2000);
                        }
                    }
                }, (index + 1) * 1500);
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        updateProgress();
    </script>
</body>
</html>